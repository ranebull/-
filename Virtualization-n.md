# Курс лекций по виртуализации
### N-ое занятие
### Что же такое контейнеризация?
**Контейнеризация или виртуализация на уровне ОС** — метод виртуализации,  
при котором ядро операционной системы 
поддерживает несколько изолированных экземпляров пространства пользователя, вместо одного.  
Эти экземпляры (часто называемые контейнерами или зонами) с точки зрения пользователя полностью идентичны реальному серверу.  
Для систем на базе UNIX, эта технология может рассматриваться как улучшенная реализация механизма **chroot**.  
Ядро обеспечивает полную изолированность контейнеров, поэтому программы из разных контейнеров не могут воздействовать друг на друга.
### Использование
Виртуализация на уровне ОС обычно используется в вирутальных хостингах, где они полезны для выделения надежно ограниченных аппаратных  
ресурсов среди большого количества взаимно не доверяющих пользователей.  
Системные администраторы могут также использовать их для консолидации серверного оборудования 
за счет централизации служб на разных узлах в контейнеры на одном сервере.  
Другие типичные сценарии включают в себя разделение нескольких приложений в отдельных контейнерах для улучшения безопасности, 
аппаратной независимости, добавление функций управления ресурсами.  
Повышение безопасности обеспечивается за счет использования механизма chroot-окружения,  
однако, оно далеко не всегда достаточно безопасное (возможна атака **chroot/jails/docker escape**).  
Реализации виртуализации на уровне ОС предоставляют возможности  живой миграции (**live-migrations**), которая может быть использована
для динамической балансировки нагрузки контейнеров между узлами в кластере.
### Оверхед
Виртуализации на уровне ОС практически не прелполагает никакого оверхеда (снижения производительности), потому что программы в виртуальных разделах используют нормальный интерфейс системных вызовов ОС и их не нужно эмулировать или запускать в виртуальной машине, как это бывает в случае с большими системами виртуализации (таких как VMware ESXi, QEMU или Hyper-V) или паравиртуализации (Xen и UML). Этот вид виртуализации не требует поддержки каких-либо технологий в оборудовании для эффективного выполнения.
### Гибкость
Виртуализация на уровне ОС не такая гибкая, как другие виды виртуализации, поскольку гостевая ОС не может отличаться от хостовой или иметь отличную версию гостевого ядра. Например, с Linux различные дистрибутивы нормально, но других операционных системах, таких как Windows не может размещаться. Например, для различных Linux-дистрибутивов это нормальная ситуация, но платформа Windows не может выступать в качестве хоста.  
Солярис частично преодолевает вышеописанные ограничения с его особенностью типизированных зон (branded zones, BrandZ), который обеспечивает возможность запуска среды внутри контейнера, который эмулирует Solaris 8 или 9 версии в Solaris 10 в качестве в качестве хоста.  
Типизированные зоны Linux (далее типизированные зоны "lx"), также доступны на базе архитектуры x86 Solaris, обеспечивая полноценное пользовательское пространство Linux разработки и поддержки исполнения Linux-приложений; кроме того, Солярис предоставляет утилиты, необходимые для установки RHEL 3.х или CentOS 3.х дистрибутивов Linux внутри "lx" зон. однако, в 2010 году типизированные зоны Linux были удалены из Solaris; в 2014 году они были возвращены в Illumos, который является форком Solaris с открытым исходным кодом, поддерживающий 32-битные ядра Linux.
### Хранилища
Некоторые реализации виртуализации на уровне ОС предоставляют механизмы копирования при записи на уровне файлов.  
(Чаще всего, стандартная файловая система разделяется между разделами, и те разделы, которые изменяют файлы автоматически создают собственные копии)  
Это упрощает резервное копирование, более эффективно и проще в кешировании, чем копирования при записи на уровне блоков в распространенных схемах больших систем виртуализации. Большие системы виртуализации, однако, могут работать с неродными (non-native) файловой системы и обладают возможностью создания и отката снимков целой системы.

Quote of features from Docker web pages:
>Docker containers wrap up a piece of software in a complete filesystem that contains everything it needs to run: code, runtime, system tools, system libraries – anything you can install on a server. This guarantees that it will always run the same, regardless of the environment it is running in.
